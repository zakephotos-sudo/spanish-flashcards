<script>
let words = [];
let current = 0;
let flipped = false;

fetch("words.json")
.then(r=>r.json())
.then(data=>{
  words = data;
  shuffle();
});

function updateCard(){
  if(!words.length){
    document.getElementById("card").textContent = "No words found.";
    return;
  }

  const word = words[current];

  document.getElementById("card").textContent =
    flipped ? word.en : word.es;

  document.getElementById("counter").textContent =
    (current + 1) + " / " + words.length;
}

function flipCard(){
  flipped = !flipped;
  updateCard();
}

function nextCard(){
  current = (current + 1) % words.length;
  flipped = false;
  updateCard();
}

function prevCard(){
  current = (current - 1 + words.length) % words.length;
  flipped = false;
  updateCard();
}

function shuffle(){
  for (let i = words.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [words[i], words[j]] = [words[j], words[i]];
  }
  current = 0;
  flipped = false;
  updateCard();
}
</script>